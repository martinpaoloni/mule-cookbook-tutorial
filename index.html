<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="MuleSoft Inc.">
<title>DevKit Tutorial - MuleSoft</title>
<style>
@import "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css";*/
@import "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js";*/
@import "http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:"Verdana", sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#97999b;text-decoration:blink;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Ubuntu",sans-serif;font-weight:300;font-style:normal;color:#00A3E0;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Ubuntu",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc>ul>li>a { font-weight: bold; color:#00A3E0; }
#toc a:active{text-decoration:underline}
#toctitle{color:#00A3E0;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:white;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:30em;padding-right:5em}
#toc.toc2{width:20em;margin-left: 5em;}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#006892;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Ubuntu",sans-serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:none;}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:0.9rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<!--<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-theme.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>DevKit Tutorial</h1>
<div class="details">
<span id="author" class="author">MuleSoft Inc.</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_features_in_tutorial">Features in Tutorial</a></li>
<li><a href="#_what_is_devkit">What is DevKit?</a></li>
<li><a href="#_when_to_use_devkit">When to Use DevKit</a></li>
<li><a href="#_what_is_a_connector">What is a Connector?</a></li>
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_set_up_your_environment">Set Up Your Environment</a></li>
<li><a href="#_import_the_cookbook">Import the Cookbook</a></li>
<li><a href="#_cookbook_description">Cookbook Description</a>
<ul class="sectlevel2">
<li><a href="#_api_description">API Description</a></li>
<li><a href="#_authentication">Authentication</a></li>
<li><a href="#_connecting_to_the_service">Connecting to the Service</a></li>
</ul>
</li>
<li><a href="#_getting_started">Getting started</a>
<ul class="sectlevel2">
<li><a href="#_create_the_cookbook_connector">Create the Cookbook Connector</a></li>
<li><a href="#_adding_configurable_fields">Adding @Configurable Fields</a></li>
<li><a href="#_initialize_the_client">Initialize the Client</a></li>
<li><a href="#processor">Adding @Processor Methods</a></li>
<li><a href="#_using_the_connector_in_mule">Using the Connector in Mule</a></li>
<li><a href="#_adding_connection_management">Adding Connection Management</a></li>
</ul>
</li>
<li><a href="#_improving_error_handling">Improving Error Handling</a>
<ul class="sectlevel2">
<li><a href="#_exception_handling_with_handler">Exception Handling with @Handler</a></li>
<li><a href="#_handling_session_expiration">Handling Session Expiration</a></li>
</ul>
</li>
<li><a href="#_adding_datasense">Adding DataSense</a>
<ul class="sectlevel2">
<li><a href="#_what_is_it">What is it?</a></li>
<li><a href="#_using_datasense">Using DataSense</a></li>
<li><a href="#_implementing_a_metadatacategory">Implementing a MetaDataCategory</a></li>
</ul>
</li>
<li><a href="#_adding_pagination">Adding Pagination</a>
<ul class="sectlevel2">
<li><a href="#_implement_pagination">Implement Pagination</a></li>
<li><a href="#_using_pagination_in_your_mule_app">Using Pagination In Your Mule App</a></li>
</ul>
</li>
<li><a href="#install-guide">Installing a Connector</a>
<ul class="sectlevel2">
<li><a href="#_using_the_anypoint_devkit_plugin">Using the Anypoint DevKit plugin</a></li>
<li><a href="#_installing_from_an_updatesite">Installing from an UpdateSite</a></li>
</ul>
</li>
<li><a href="#_updating_a_connector">Updating a Connector</a></li>
<li><a href="#_debugging_your_connector">Debugging Your Connector</a></li>
<li><a href="#_sharing_my_connector">Sharing My Connector</a></li>
<li><a href="#_others">Others</a>
<ul class="sectlevel2">
<li><a href="#connector-structure">Connector Structure</a></li>
<li><a href="#configurable">Configurable and Parameter Modifiers</a></li>
<li><a href="#_adding_oauthv2">Adding OAuthV2</a></li>
<li><a href="#mutiple-connection-strategies">Multiple Configuration</a></li>
<li><a href="#_adding_source">Adding @Source</a></li>
<li><a href="#_adding_a_transformer">Adding a Transformer</a></li>
<li><a href="#_using_password">Using @Password</a></li>
<li><a href="#_sdk_client">SDK Client</a></li>
<li><a href="#_soap_api">SOAP API</a></li>
<li><a href="#_rest_api">REST API</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_features_in_tutorial">Features in Tutorial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial you will learn how to create a connector, using the DevKit, that users can interact with in Mule and Anypoint Studio.</p>
</div>
<div class="paragraph">
<p>As you move forward you will learn the features that DevKit provides to help you build Mule connectors, and how easy it can be to extend Mule.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_devkit">What is DevKit?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="http://www.mulesoft.org/documentation/display/current/Anypoint+Connector+DevKit">DevKit</a> is an important part of the Anypoint Platform. The DevKit is a Maven-based tool that lets you build reusable components that not only can be run as part of a Mule application, but also can be easily configured and consumed from <a href="http://www.mulesoft.com/platform/mule-studio">Anypoint Studio</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_to_use_devkit">When to Use DevKit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are several scenarios in which you may want to build your own connector:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You need to consume an API in one or more applications and you want to make sure everyone uses the same component.</p>
</li>
<li>
<p>You have an API and want to add strategic value to your business by providing a connector and telling the world "I am part of Mule Platform".</p>
</li>
<li>
<p>You want to facilitate integration with SaaS and on-premise Web services, applications, and data sources.</p>
</li>
<li>
<p>The API you consume supports Pagination, Batch, and/or has a SQL capability.</p>
</li>
<li>
<p>The API you consume has different entity types and/or its structure can change.</p>
</li>
<li>
<p>You want to extend Mule core.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_a_connector">What is a Connector?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A MuleSoft connector is a reusable component that interacts with Mule ESB and  Anypoint Studio. A connector enables Mule flows to communicate with a target resource. The connector conveys data between a resource and a Mule flow, and transforms the data into a Mule Message.</p>
</div>
<div class="paragraph">
<p>Using Anypoint Connector DevKit, a connector abstracts developers from the Mule interfaces that are required to run the connector in the Mule platform, and generates a user interface.</p>
</div>
<div class="paragraph">
<p>A connector also abstracts users from the complexity of initializing required elements such as connecting to a sandbox. A well-developed connector makes Mule apps much simpler for users by handling internal tasks like pagination, session expirations, and input and output metadata. This tutorial shows you how to create a well-developed connector.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To develop a connector you should have a working knowledge of Mule, Anypoint Studio, and Java development in general, specifically the use of <a href="https://docs.oracle.com/javase/tutorial/java/annotations/basics.html">Java annotations</a>.</p>
</div>
<div class="paragraph">
<p>DevKit&#8217;s functionality is to expose to connector developers  <a href="http://docs.oracle.com/javase/tutorial/java/annotations/">Java annotations</a> that generate code and files to interact with Mule, and Anypoint Studio. The generated code provides the interface between the connector and Mule that would otherwise require each connector developer to include extensive boilerplate code, as well as the code and files required to interact with your connector in Anypoint Studio.</p>
</div>
<div class="paragraph">
<p>You can develop a connector using Windows, Mac, or Linux.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set_up_your_environment">Set Up Your Environment</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install <a href="http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html">Java 1.7 JDK</a>.</p>
</li>
<li>
<p>Download and install <a href="http://maven.apache.org/download.cgi">Maven</a>. If you&#8217;re new to Maven, read <a href="http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html">Maven in 5 Minutes</a>.</p>
</li>
<li>
<p>Download <a href="http://www.mulesoft.com/platform/mule-studio">Anypoint Studio</a>.</p>
</li>
<li>
<p>Check <a href="http://www.mulesoft.org/documentation/display/current/Maven+Support+in+Anypoint+Studio">Maven configuration</a> in Anypoint Studio.</p>
</li>
<li>
<p>Install <a href="http://www.mulesoft.org/documentation/display/current/Setting+Up+Your+Dev+Environment#SettingUpYourDevEnvironment-DevKitPlugin">Anypoint DevKit plugin</a>.</p>
</li>
<li>
<p>Install a <a href="http://git-scm.com/downloads">GitHub</a> client.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>JRE is not suited for development, you need to have a JDK installed.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For information on setup and DevKit, see
<a href="http://www.mulesoft.org/documentation/display/current/Setting+Up+Your+Dev+Environment">Setting up Your Dev Environment</a> and  <a href="http://www.mulesoft.org/documentation/display/current/Anypoint+Connector+DevKit">Anypoint Connector DevKit</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_import_the_cookbook">Import the Cookbook</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To import the cookbook tutorial from Git:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone <a href="https://github.com/mulesoft/mule-cookbook">tutorial</a> repository into your local machine. For example, to clone to a <strong>dev</strong> folder, run:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd ~/dev
git clone https://github.com/mulesoft/mule-cookbook.git</code></pre>
</div>
</div>
</li>
<li>
<p>In the cloned directory, run:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd ~/dev/mule-cookbook
mvn install eclipse:eclipse</code></pre>
</div>
</div>
</li>
<li>
<p>When done, in Anypoint Studio, import the root project as an existing project with the <strong>File</strong> &gt; <strong>Import</strong> &gt; <strong>General</strong> &gt; <strong>Existing Projects into Workspace</strong> commands.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cookbook_description">Cookbook Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Cookbook is a service that helps users organize ingredients and recipes, so that users can easily find recipes for the foods they like to prepare.</p>
</div>
<div class="sect2">
<h3 id="_api_description">API Description</h3>
<div class="paragraph">
<p>This API allows users to use the create, read, update, and delete (CRUD) operations for single and multiple recipes and ingredients. The API also allows you to view recently added recipes.</p>
</div>
<div class="paragraph">
<p>The API is exposed as a SOAP Service using a  <a href="resources/wsdl/IMuleCookBookService.wsdl">WSDL</a> file, as a Rest API with a <a href="resources/api.raml">RAML</a> file, and through a Java  <a href="resources/java/IMuleCookBookClient.java">SDK</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_authentication">Authentication</h3>
<div class="paragraph">
<p>This connector supports the following authentication types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom with a username and password that provides a token to send with each request as part of the request.</p>
</li>
<li>
<p><a href="http://oauth.net/2/">OAuthV2</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_credentials">Credentials</h4>
<div class="sect4">
<h5 id="_custom_authentication">Custom Authentication:</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Username</th>
<th class="tableblock halign-left valign-top">Password</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_oauth">OAuth:</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Client ID</th>
<th class="tableblock halign-left valign-top">Client Secret</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ePU9CxyEVFIXF9nMoGH16s1lUGe5JYPPzClnnVBG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YeKAsQCdr264tNmDdvTdJUAh9TQraJqZpwbEoTuz</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_to_the_service">Connecting to the Service</h3>
<div class="paragraph">
<p>The web service is available online.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To consume the SOAP version and the SDK just make the request to the address: <strong><a href="http://devkit-cookbook.cloudhub.io/soap" class="bare">http://devkit-cookbook.cloudhub.io/soap</a></strong></p>
</li>
<li>
<p>The rest base url is <strong><a href="http://devkit-cookbook.cloudhub.io/rest" class="bare">http://devkit-cookbook.cloudhub.io/rest</a></strong></p>
<div class="ulist">
<ul>
<li>
<p>The OAuth Authorize url is <strong>/oauth/authorize</strong></p>
</li>
<li>
<p>The Access Token url is <strong>/oauth/accessToken</strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also run it locally since we provide the source code for the servers already ready to start.</p>
</div>
<div class="paragraph">
<p>The local SOAP Server can be run from the soap-server project by simply executing the com.cookbook.tutorial.service.MuleStoreServer class.</p>
</div>
<div class="paragraph">
<p>By default it starts the server on address <strong><a href="http://localhost:9090/cook-book" class="bare">http://localhost:9090/cook-book</a></strong></p>
</div>
<div class="paragraph">
<p>The local Rest Server can be run from the rest-server project by simple executing the com.cookbook.tutorial.Main class.</p>
</div>
<div class="paragraph">
<p>By default it starts the server on address <strong><a href="http://localhost/9091" class="bare">http://localhost/9091</a></strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build a basic connector for the Cookbook service, we need to perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Connector Project.</p>
</li>
<li>
<p>Add the dependency that contains the client we will use to connect to the service.</p>
</li>
<li>
<p>Add a configurable URL so that users can specify the URL where the service is hosted.</p>
</li>
<li>
<p>Add an operation that users can consume in Anypoint Studio.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_create_the_cookbook_connector">Create the Cookbook Connector</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Anypoint Studio, click <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Anypoint Connector Project</strong> or right-click your project name in Package Explorer and click <strong>New</strong> &gt; <strong>Anypoint Connector Project</strong>:</p>
<div class="imageblock">
<div class="content">
<img src="images/new-connector-1.png" alt="new connector 1" width="500">
</div>
</div>
</li>
<li>
<p>Select the Connector Type you want to create. In this case, select SDK Based:</p>
<div class="imageblock">
<div class="content">
<img src="images/new0.png" alt="new0" width="500">
</div>
</div>
</li>
<li>
<p>Specify the name of your connector and don&#8217;t forget to uncheck the default generation before clicking <strong>Finish</strong>:</p>
<div class="paragraph">
<p><span class="image"><img src="images/new1.png" alt="new1" width="550"></span></p>
</div>
<div class="paragraph">
<p>This generates a project containing the structure and all required elements including a skeleton connector, images, sample docs file, but no basic tests for your connector.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/new-connector-3.png"><img src="images/new-connector-3.png" alt="new connector 3" width="600"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can customize the icons by replacing the generated ones. Just make sure that they have the same size so that they look good in Studio.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can enable the DevKit view by clicking from the top bar <strong>Window</strong> &gt; <strong>Show view</strong> &gt; <strong>Other</strong>, and look for DevKit in the list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enable-view.png" alt="enable view" width="300">
</div>
<div class="title">Figure 1. DevKit View shows a compact view of the connector.</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can check a detailed explanation of the relation between <a href="#connector-structure">connector</a> structure and Studio.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When consuming a service, you may need to configure different values to establish a connection.</p>
</div>
<div class="paragraph">
<p>To solve this, DevKit provides a pair of annotations that let you modularize in different classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The behavior you expose to users, using the @Connector annotation.</p>
</li>
<li>
<p>Code related to the connection/configuration is injected into your @Config annotated field. There are several types of configuration you can use as we will see in this tutorial.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you mark a field with @Config, DevKit ensures that you have an initialized object set when the Mule app runs and that requests are made to your connector.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_adding_dependencies">Adding Dependencies</h4>
<div class="paragraph">
<p>Let&#8217;s start coding by creating a connector that allows you to get the recently added elements.</p>
</div>
<div class="paragraph">
<p>Since we don&#8217;t need any kind of authentication to consume the recently added recipes, this is the best operation we can use to start learning how to build our connector.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add our client dependency so that we can use it in our connector. This way we can use the Java API built to connect to the Cookbook.</p>
<div class="paragraph">
<p>In your pom.xml file add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
  <span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.cookbook.tutorial<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>sdk-client<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_configurable_fields">Adding @Configurable Fields</h3>
<div class="paragraph">
<p>On the @Configuration ConnectorConfig add a <a href="#configurable">configurable</a> field for the address where the Cookbook service is hosted:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <strong>conf</strong> at the editor of your connector config and use Ctrl+Space to display the templates.</p>
<div class="imageblock">
<div class="content">
<img src="images/config1.png" alt="config1" width="600">
</div>
</div>
</li>
<li>
<p>Add a configurable field in our @Configuration component with a default value for the endpoint our client connects to so that users can connect to different sandboxes.</p>
</li>
<li>
<p>Create the a setter and a getter, since all @Configurable items must have getters and setters.</p>
<div class="paragraph">
<p>See full <a href="resources/java/v1/ConnectorConfig.java">Config</a> source code.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_initialize_the_client">Initialize the Client</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On your @Connector marked class use the @Start annotation on a method to initialize the client.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="directive">private</span> MuleCookBookClient client;

        <span class="annotation">@Start</span>
        <span class="directive">public</span> <span class="type">void</span> initialize() {
                client = <span class="keyword">new</span> MuleCookBookClient(config.getAddress());
        }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Anypoint connectors can be fully aware of Mule&#8217;s lifecycle without implementing any Mule-specific interface.</p>
</div>
<div class="paragraph">
<p>There is an annotation method for each of the four phases of the lifecycle.</p>
</div>
<div class="paragraph">
<p>When a method is annotated with one of these annotations, DevKit invokes it during the lifecycle phase that the annotation represents.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="processor">Adding @Processor Methods</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the dummy operation the connector has.</p>
</li>
<li>
<p>To add a processor simply type <strong>proc</strong> at the editor and use Ctrl+Space to display the templates and pick the simple processor.</p>
<div class="imageblock">
<div class="content">
<img src="images/processor1.png" alt="processor1" width="600">
</div>
</div>
</li>
<li>
<p>Change it to reflect the getRecentlyAdded method signature, and there we have our first connector, ready to be tested.</p>
<div class="imageblock">
<div class="content">
<img src="images/processor2.png" alt="processor2" width="600">
</div>
</div>
</li>
<li>
<p>Run the <a href="http://www.mulesoft.org/documentation/display/current/Creating+an+Anypoint+Connector+Project#CreatinganAnypointConnectorProject-MoreDevKitActions">Generate Sources</a> Action.</p>
<div class="paragraph">
<p>See full <a href="resources/java/v1/CookbookConnector.java">Connector</a> source code.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>At this point you can <a href="#install-guide">install</a> this Connector and try it in Studio if you want.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As you modify your connector, you may start seeing error markers on the generated folder.</p>
</div>
<div class="paragraph">
<p>Just ignore them.</p>
</div>
<div class="paragraph">
<p>Once you regenerate the sources, the errors will go away as the generated code will be refreshed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_adding_samples_to_your_connector">Adding Samples to Your Connector</h4>
<div class="paragraph">
<p>Let&#8217;s now add the example for it.</p>
</div>
<div class="paragraph">
<p>Create the file pointed by the <strong>{@sample &#8230;&#8203;}</strong> if it doesn&#8217;t exists already</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: When you add an example, use the same name as the name that narrows the example in the file. Inside of it you have to put an example of the @Processor.</p>
</div>
<div class="paragraph">
<p>If you have the Javadoc check enabled, DevKit plugin marks the missing example as an error and provide a quick fix for us to easily add the example.</p>
</div>
<div class="paragraph">
<p>Otherwise, open the file and type <strong>&lt;</strong> at the editor and use Ctrl+Space to display the templates and pick the one that best suite our operation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample1.png" alt="sample1" width="600">
</div>
</div>
<div class="paragraph">
<p>Our example in this case looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- BEGIN_INCLUDE(cook-book:getRecentlyAdded) --&gt;</span>
        <span class="tag">&lt;cook-book:get-recently-added</span><span class="tag">/&gt;</span>
<span class="comment">&lt;!-- END_INCLUDE(cook-book:getRecentlyAdded) --&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_connector_in_mule">Using the Connector in Mule</h3>
<div class="paragraph">
<p>You will do a very simple app that listens to an HTTP endpoint and when we hit it, it will retrieve the list of recently added elements.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a mule app and add a simple http listener. If this is your first mule app, take a look at our <a href="http://www.mulesoft.org/documentation/display/current/Build+a+Hello+World+Application">Hello World Application</a>.</p>
</li>
<li>
<p>Drag and drop the Connector, and configure it.</p>
<div class="imageblock">
<div class="content">
<img src="images/mule-app/first-mule-app-config.png" alt="first mule app config" width="600">
</div>
</div>
</li>
<li>
<p>Drag and drop an <strong>Object to JSON</strong> transformer and run the app.</p>
</li>
</ol>
</div>
<div class="panel panel-default no-padding">
    <div class="panel-heading no-padding">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#first-view" role="tab" data-toggle="tab">Mule App</a></li>
            <li><a href="#first-xml" role="tab" data-toggle="tab">XML</a></li>
        </ul>
    </div>

    <!-- Tab panes + Panel body -->
    <div class="panel-body tab-content no-padding">
        <div class="tab-pane in active fade no-padding" id="first-view">
<div class="imageblock">
<div class="content">
<img src="images/mule-app/first-mule-app.png" alt="first mule app" width="600">
</div>
</div>
        </div>
        <div class="tab-pane fade no-padding" id="first-xml">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:http</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;http:listener-config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8081</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP Listener Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook__Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook: Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mule-appFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;http:listener</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/get-recently</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:get-recently-added</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook__Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;json:object-to-json-transformer</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Object to JSON</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
        </div>
    </div>
</div>
<div class="paragraph">
<p>If you hit the url <a href="http://localhost:8081/get-recently" class="bare">http://localhost:8081/get-recently</a> you will see a reply similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
   {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>:<span class="integer">1428678371866</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">2</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">lastModified</span><span class="delimiter">&quot;</span></span>:<span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Baked Apples</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">cookTime</span><span class="delimiter">&quot;</span></span>:<span class="float">20.0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">directions</span><span class="delimiter">&quot;</span></span>:[
         <span class="string"><span class="delimiter">&quot;</span><span class="content">Cut the Apples</span><span class="delimiter">&quot;</span></span>,
         <span class="string"><span class="delimiter">&quot;</span><span class="content">Put them in the oven</span><span class="delimiter">&quot;</span></span>,
         <span class="string"><span class="delimiter">&quot;</span><span class="content">Remove from the oven after 20.0 minutes</span><span class="delimiter">&quot;</span></span>
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">ingredients</span><span class="delimiter">&quot;</span></span>:[
         {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>:<span class="integer">1428678371866</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">lastModified</span><span class="delimiter">&quot;</span></span>:<span class="value">null</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Apple</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>:<span class="float">0.0</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">unit</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">UNIT</span><span class="delimiter">&quot;</span></span>
         }
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">prepTime</span><span class="delimiter">&quot;</span></span>:<span class="float">30.0</span>
   }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to know how to create tests for your connector check:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/advanced/index.html#_functional_tests_automation">Tests Automation</a> documentation.</p>
</li>
<li>
<p>The full <a href="http://www.mulesoft.org/documentation/display/current/Developing+DevKit+Connector+Tests">testing documentation</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_connection_management">Adding Connection Management</h3>
<div class="paragraph">
<p>Unlike the <strong>getRecentlyAdded</strong> call doesn&#8217;t require authentication, all other operations require that you set a token on each request.</p>
</div>
<div class="paragraph">
<p>The client you are using provides a login call that initializes the token and uses it in subsequent requests.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Take into account that the session can expire and cause the connector to make a login request again.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>DevKit provides a different set of annotations to keep your code clean and handle the connection in a different class for delegating responsibilities.</p>
</div>
<div class="paragraph">
<p>To implement @ConnectionManagement, you need to move the initialization to @ConnectionManagement, instead of using the @Start annotation as we did before.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the ConnectorConfig change the @Configuration for a @ConnectionManagement annotation</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ConnectionManagement</span>(friendlyName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Configuration</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</li>
<li>
<p>Add the MuleCookbookClient to the ConnectorConfig and add a getter and getter.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">private</span> MuleCookBookClient client;

    <span class="directive">public</span> MuleCookBookClient getClient() {
        <span class="keyword">return</span> client;
    }

    <span class="directive">public</span> <span class="type">void</span> setClient(MuleCookBookClient client) {
        <span class="local-variable">this</span>.client = client;
    }</code></pre>
</div>
</div>
</li>
<li>
<p>Implement these four methods as shown in the code sample that follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>@Connect</strong> - Initialize the client, and if you don&#8217;t have a login, call the API to verify.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Connect</span>
    <span class="annotation">@TestConnectivity</span>
    <span class="directive">public</span> <span class="type">void</span> connect(<span class="annotation">@ConnectionKey</span> <span class="predefined-type">String</span> username, <span class="annotation">@Password</span> <span class="predefined-type">String</span> password) <span class="directive">throws</span> ConnectionException {
        setClient(<span class="keyword">new</span> MuleCookBookClient(getAddress()));
        <span class="keyword">try</span> {
            getClient().login(username, password);
        } <span class="keyword">catch</span> (InvalidCredentialsException e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> ConnectionException(ConnectionExceptionCode.INCORRECT_CREDENTIALS, e.getMessage(), <span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid credentials</span><span class="delimiter">&quot;</span></span>);
        }
    }</code></pre>
</div>
</div>
</li>
<li>
<p><strong>@Disconnect</strong> - Release any connection if required.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Disconnect</span>
    <span class="directive">public</span> <span class="type">void</span> disconnect() {
        setClient(<span class="predefined-constant">null</span>);
    }</code></pre>
</div>
</div>
</li>
<li>
<p><strong>@ValidateConnection</strong> - Check that your connection is alive.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@ValidateConnection</span>
    <span class="directive">public</span> <span class="type">boolean</span> isConnected() {
        <span class="keyword">return</span> getClient() != <span class="predefined-constant">null</span>;
    }</code></pre>
</div>
</div>
</li>
<li>
<p><strong>@ConnectionIdentifier</strong> - Return a string value. This will only be used when debugging.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@ConnectionIdentifier</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> connectionId() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">001</span><span class="delimiter">&quot;</span></span>;
    }</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Remove the MuleCookBookClient from the CookbookConnector and the @Start method</p>
</li>
<li>
<p>On our @Processor use the client provided by the ConnectorConfig</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Processor</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Recipe&gt; getRecentlyAdded() {
        <span class="keyword">return</span> config.getClient().getRecentlyAdded();
    }</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="resources/java/v2/CookbookConnector.java">Connector</a> source code.</p>
</li>
<li>
<p><a href="resources/java/v2/ConnectorConfig.java">Config</a> source code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you install this version and try to run the mule app we created before, you will see that it fails with a SAXParseException because we need to add a username and password to our configuration.</p>
</div>
<div class="paragraph">
<p>Just open the global configuration of your connector and check that there are 2 new fields, username and password. Configure them and you can run the app again.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/connection-management.png" alt="connection management" width="600">
</div>
</div>
<div class="paragraph">
<p>This is the mule updated xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:http</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;http:listener-config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8081</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP Listener Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook__Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook: Configuration type config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mule-appFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;http:listener</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/get-recently</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:get-recently-added</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook__Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;json:object-to-json-transformer</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Object to JSON</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check the <a href="http://mulesoft.github.io/connector-certification-docs/advanced/index.html#_test_connectivity">Test Connectivity</a> section.</p>
</li>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/Authentication">DevKit Authentication</a> documentation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_improving_error_handling">Improving Error Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains how to improve exception handling and reconnecting.</p>
</div>
<div class="sect2">
<h3 id="_exception_handling_with_handler">Exception Handling with @Handler</h3>
<div class="paragraph">
<p>The <a href="http://www.mulesoft.org/documentation/display/current/Annotation+Reference#AnnotationReference-handleran">@Handler</a> feature, is very useful when you want to avoid duplicated code when handling exceptions, and also so that your connector code is cleaner.</p>
</div>
<div class="paragraph">
<p>When handling messages retrieved from the API, if the message is poor and you know how to improve it, you can use this mechanism, to enrich the error provided to the user.</p>
</div>
<div class="paragraph">
<p>To see how it works, let&#8217;s create a handler for the InvalidEntityException thrown by the create() call of the Cookbook SDK.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Anypoint Connector Component by doing a right click and selecting the wizzard.</p>
<div class="imageblock">
<div class="content">
<img src="images/new-component.png" alt="new component" width="600">
</div>
</div>
</li>
<li>
<p>Select the package, component type and class name and click on Finish.</p>
<div class="imageblock">
<div class="content">
<img src="images/new-component-2.png" alt="new component 2" width="600">
</div>
</div>
</li>
<li>
<p>Improve the error message when InvalidEntityException is thrown.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Handle</span>
    <span class="directive">public</span> <span class="type">void</span> handleException(<span class="exception">Exception</span> ex) <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="keyword">if</span> (ex <span class="keyword">instanceof</span> InvalidEntityException) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">You cannot provide an Id when creating an Ingredient</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="comment">// Just let it go</span>
            <span class="keyword">throw</span> ex;
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the full <a href="resources/java/v3/CookbookHandler.java">source code</a>.</p>
</div>
</li>
<li>
<p>Add a new processor to create Ingredients</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="directive">public</span> Ingredient createIngredient(<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) Ingredient Ingredient) <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    <span class="keyword">return</span> (Ingredient) config.getClient().create(Ingredient);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the full <a href="resources/java/v3/CookbookConnector.java">source code</a>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_handling_session_expiration">Handling Session Expiration</h3>
<div class="paragraph">
<p>There is no need for users to add custom code in their Mule apps to handle session expiration. DevKit provides a mechanism to do this in a clean way.</p>
</div>
<div class="paragraph">
<p>Just annotate your @Processor method with the @ReconnectOn exception.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> Ingredient createIngredient(<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) Ingredient Ingredient) <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    <span class="keyword">return</span> (Ingredient) config.getClient().create(Ingredient);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the full <a href="resources/java/v3/CookbookConnector2.java">source code</a>.</p>
</div>
<div class="paragraph">
<p>In our Mule app, you can configure a reconnection strategy so that our Mule app is ready to  handle session expirations.</p>
</div>
<div class="paragraph">
<p>Global Config dialog configuration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/reconnect.png" alt="reconnect" width="500">
</div>
</div>
<div class="paragraph">
<p>The XML generated looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;cookbook:config-type</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;reconnect</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/cookbook:config-type&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_datasense">Adding DataSense</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_is_it">What is it?</h3>
<div class="paragraph">
<p>DataSense improves the user experience at design time when creating Mule applications by enabling your connector to determine the API of your target resource.</p>
</div>
<div class="paragraph">
<p>Even though DataSense is optional, its use enables connector users to acquire metadata of the entities in a service.</p>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/Adding+DataSense">Adding DataSense</a></p>
</li>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/DataSense">DataSense</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this tutorial, we use a static DataSense model, which means that the entities are fixed and known upfront, and do not change. The fields that this model supports are also fixed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_datasense">Using DataSense</h3>
<div class="paragraph">
<p>To use DataSense in the cookbook:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Analyze the entities in Mule Cookbook service. We only have two simple entities, Recipe and Ingredient that both extend from CookBookEntity.</p>
</li>
<li>
<p>Look at how our createIngredient operation looks inside Anypoint Studio, and how it interacts with other components.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> Ingredient createIngredient(<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) Ingredient Ingredient) <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    <span class="keyword">return</span> (Ingredient) config.getClient().create(Ingredient);
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_handling_ingredients">Handling Ingredients</h4>
<div class="paragraph">
<p>We defined the operation so that it receives an Ingredient, and it returns an Ingredient with the extra fields populated from the server.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s handle the ingredients:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the input metadata to see that the expected output is a POJO, with the expected fields our Ingredient has:</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-expected-ingredients.png" alt="datasense expected ingredients" width="800">
</div>
</div>
</li>
<li>
<p>Verify that the output metadata is expected:</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-ingredients.png" alt="datasense ingredients" width="800">
</div>
</div>
</li>
<li>
<p>Drag and drop a Transform Message element either behind or after our connector. The Transform Message element automatically picks the input or output:</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-input.png" alt="datasense input" width="800">
</div>
<div class="title">Figure 2. Transform Message Receiving Connector Output</div>
</div>
<div class="paragraph">
<p>Because DevKit auto-generates static metadata, DevKit automatically ensures that your connector knows how to propagate metadata information.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_handling_recipes">Handling Recipes</h4>
<div class="paragraph">
<p>We don&#8217;t have just Ingredients, we also have Recipes, so we don&#8217;t want one method for each entity we have in our model.</p>
</div>
<div class="paragraph">
<p>Modify your connector to just work with the CookBookEntity class:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an operation:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span> (handler=CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> CookBookEntity create(<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@RefOnly</span> CookBookEntity entity) <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    <span class="keyword">return</span> config.getClient().create(entity);
}</code></pre>
</div>
</div>
</li>
<li>
<p>The <strong>@RefOnly</strong> annotation is used to tell DevKit that the input can only be specified as a reference (due to a DevKit limitations on handling Abstract classes).</p>
<div class="paragraph">
<p>Let&#8217;s see how this affects the UI and user experience.</p>
</div>
<div class="paragraph">
<p>Studio, can no longer determine input or output type:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/datasense/ref-only-input.png" alt="ref only input" width="900">
</div>
<div class="title">Figure 3. Connector Input with @RefOnly</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/datasense/ref-only-output.png" alt="ref only output" width="900">
</div>
<div class="title">Figure 4. Connector Output with Abstract Class</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the next section we get back our DataSense-friendly user experience.</p>
</div>
<div class="paragraph">
<p>The full source code of our connector with a create, update, get and delete operation is available <a href="resources/java/v4/CookbookConnector.java">here</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_a_metadatacategory">Implementing a MetaDataCategory</h3>
<div class="paragraph">
<p>To implement DataSense using a @MetaDataCategory, you need to separate your implementation in two steps, retrieving the keys and describing the keys.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the Anypoint DevKit Component wizard to create a new MetaDataCategory</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/new-metadatacategory.png" alt="new metadatacategory" width="600">
</div>
</div>
</li>
<li>
<p>Modify the method annotate with @MetaDataKeyRetriever to retrieve two keys, one for Recipe and another for Ingredient.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MetaDataKeyRetriever</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;MetaDataKey&gt; getMetaDataKeys() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="predefined-type">List</span>&lt;MetaDataKey&gt; keys = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;MetaDataKey&gt;();

    <span class="comment">// Generate the keys</span>
    keys.add(<span class="keyword">new</span> DefaultMetaDataKey(<span class="string"><span class="delimiter">&quot;</span><span class="content">id1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ingredient</span><span class="delimiter">&quot;</span></span>));
    keys.add(<span class="keyword">new</span> DefaultMetaDataKey(<span class="string"><span class="delimiter">&quot;</span><span class="content">id2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Recipe</span><span class="delimiter">&quot;</span></span>));

    <span class="keyword">return</span> keys;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Modify the method annotate with @MetaDataRetriever, to retrieve the description. Because we use a static model, we can just create a POJO model:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MetaDataRetriever</span>
<span class="directive">public</span> MetaData getMetaData(MetaDataKey key) <span class="directive">throws</span> <span class="exception">Exception</span> {
    DefaultMetaDataBuilder builder = <span class="keyword">new</span> DefaultMetaDataBuilder();
    <span class="comment">// Since our model is static and we can simply create the pojo model.</span>
    PojoMetaDataBuilder&lt;?&gt; pojoObject = <span class="predefined-constant">null</span>;
    <span class="keyword">if</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">id1</span><span class="delimiter">&quot;</span></span>.equals(key.getId())) {
        pojoObject = builder.createPojo(Ingredient.class);
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">id2</span><span class="delimiter">&quot;</span></span>.equals(key.getId())) {
        pojoObject = builder.createPojo(Recipe.class);
    } <span class="keyword">else</span> {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid key:</span><span class="delimiter">&quot;</span></span> + key.getId());
    }
    MetaDataModel model = pojoObject.build();
    MetaData metaData = <span class="keyword">new</span> DefaultMetaData(model);

    <span class="keyword">return</span> metaData;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the full <a href="resources/java/v5/DataSenseResolver.java">source code</a>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use this in our connector, modify our @Processors so that a user can pick the entities.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Annotate our @Connector class with the @MetaDataScope annotation. This sets the default MetaDataCategory that&#8217;s used every time users choose a @Processor that has a @MetaDataKeyParam.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Connector</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">cookbook</span><span class="delimiter">&quot;</span></span>, friendlyName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Cookbook</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MetaDataScope</span>(DataSenseResolver.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CookbookConnector</span> {</code></pre>
</div>
</div>
</li>
<li>
<p>To describe input and output, add a String annotated with <strong>@MetaDataKeyParam</strong>, and specify that it affects input and output by adding the <strong>affects=MetaDataKeyParamAffectsType.BOTH</strong> :</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> CookBookEntity create(<span class="annotation">@MetaDataKeyParam</span>(affects = MetaDataKeyParamAffectsType.BOTH) <span class="predefined-type">String</span> type, <span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@RefOnly</span> CookBookEntity entity)
        <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    <span class="keyword">return</span> config.getClient().create(entity);
}</code></pre>
</div>
</div>
</li>
<li>
<p>In your get operation you need specify that the affect only applies to the output so we modify it just a little:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> CookBookEntity get(<span class="annotation">@MetaDataKeyParam</span>(affects = MetaDataKeyParamAffectsType.OUTPUT) <span class="predefined-type">String</span> type, <span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Integer</span> id) <span class="directive">throws</span> InvalidEntityException,
        SessionExpiredException, NoSuchEntityException {
    <span class="keyword">return</span> config.getClient().get(id);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Check our new connector looks in Studio. We have a combo after we select the entity type and save it. This automatically refreshes our metadata.</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-static.png" alt="datasense static" width="800">
</div>
</div>
<div class="paragraph">
<p>Now even the Transform Message element knows how to interact with our @Connector:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-static2.png" alt="datasense static2" width="800">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>View connector full source code <a href="resources/java/v5/CookbookConnector.java">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_dynamic_datasense">Dynamic DataSense</h4>
<div class="paragraph">
<p>In the previous section we covered the scenario when your model is static. Let&#8217;s take a look into a much more complex scenario.</p>
</div>
<div class="paragraph">
<p>There are APIs that provide a way to get entity definitions dynamically. Salesforce, NetSuite are just some examples of these.</p>
</div>
<div class="paragraph">
<p>In our case, our Cookbook provides an operation that describes our entities, so let&#8217;s use that instead to get the entities and structure:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the supported entities, and generate a key that we can use later:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MetaDataKeyRetriever</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;MetaDataKey&gt; getMetaDataKeys() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="predefined-type">List</span>&lt;MetaDataKey&gt; keys = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;MetaDataKey&gt;();
    <span class="predefined-type">List</span>&lt;CookBookEntity&gt; entities = getConnector().getConfig()
            .getClient().getEntities();
    <span class="comment">// Generate the keys</span>
    <span class="keyword">for</span> (CookBookEntity entity : entities) {
        keys.add(<span class="keyword">new</span> DefaultMetaDataKey(entity.getClass().getName() + <span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>
                + entity.getId(), entity.getName()));
    }

    <span class="keyword">return</span> keys;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Use a structure that we can dynamically modify, and the way to do this in Mule is by using a Map&lt;String,Object&gt; as parameters and/or return types of our connector.</p>
<div class="paragraph">
<p>Mule provides a builder that helps us generate the MetaData for the entities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MetaDataRetriever</span>
<span class="directive">public</span> MetaData getMetaData(MetaDataKey key) <span class="directive">throws</span> <span class="exception">Exception</span> {
    DefaultMetaDataBuilder builder = <span class="keyword">new</span> DefaultMetaDataBuilder();
    <span class="comment">// Since our model is static and we can simply create the pojo model.</span>
    <span class="predefined-type">String</span><span class="type">[]</span> keyParts = key.getId().split(<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">if</span> (keyParts.length != <span class="integer">2</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(
                <span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid key. Format should be 'entityType#id'</span><span class="delimiter">&quot;</span></span>);
    }
    <span class="predefined-type">Integer</span> id = <span class="predefined-type">Integer</span>.valueOf(keyParts[<span class="integer">1</span>]);
    CookBookEntity entity = (CookBookEntity) <span class="predefined-type">Class</span>.forName(keyParts[<span class="integer">0</span>])
            .newInstance();
    entity.setId(id);
    Description description = getConnector().getConfig().getClient()
            .describeEntity(entity);

    DynamicObjectBuilder&lt;?&gt; dynamicObject = builder.createDynamicObject(key
            .getId());

    <span class="keyword">for</span> (Description fields : description.getInnerFields()) {
        addFields(fields, dynamicObject);
    }

    MetaDataModel model = builder.build();
    MetaData metaData = <span class="keyword">new</span> DefaultMetaData(model);

    <span class="keyword">return</span> metaData;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Check the full <a href="resources/java/v6/DataSenseResolver.java">source code</a>.</p>
</li>
<li>
<p>In our @Connector now we need to add the code to generate the entities from the Map, and return Map in all our operations. Why is this important? To maintain consistency in our API.</p>
<div class="paragraph">
<p>This is how our new Create looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Processor</span>
<span class="annotation">@OnException</span>(handler = CookbookHandler.class)
<span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
<span class="directive">public</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; create(<span class="annotation">@MetaDataKeyParam</span>(affects = MetaDataKeyParamAffectsType.BOTH) <span class="predefined-type">String</span> type, <span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@RefOnly</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; entity)
        <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
    ObjectMapper m = <span class="keyword">new</span> ObjectMapper();
    CookBookEntity input = <span class="predefined-constant">null</span>;
    <span class="keyword">if</span> (type.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">com.cookbook.tutorial.service.Recipe</span><span class="delimiter">&quot;</span></span>)) {
        input = m.convertValue(entity, Recipe.class);
    } <span class="keyword">else</span> <span class="keyword">if</span> (type.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">com.cookbook.tutorial.service.Ingredient</span><span class="delimiter">&quot;</span></span>)) {
        input = m.convertValue(entity, Ingredient.class);
    } <span class="keyword">else</span> {
        <span class="keyword">throw</span> <span class="keyword">new</span> InvalidEntityException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Don't know how to handle type:</span><span class="delimiter">&quot;</span></span> + type);
    }
    <span class="keyword">return</span> m.convertValue(<span class="local-variable">this</span>.getConfig().getClient().create(input), <span class="predefined-type">Map</span>.class);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that now the UI is a different form before, because the input is now a map.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-ui.png" alt="datasense ui" width="900">
</div>
</div>
</li>
<li>
<p>In our Mule app, we cannot update the metadata and use our connector. And, as you can see, note that we have a map structure instead of a POJO:</p>
<div class="imageblock">
<div class="content">
<img src="images/datasense/datasense-map.png" alt="datasense map" width="900">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To see how to test DataSense check our <a href="http://mulesoft.github.io/connector-certification-docs/advanced/index.html#_testing_metadata">Testing DataSense</a> guide.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_pagination">Adding Pagination</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_implement_pagination">Implement Pagination</h3>
<div class="paragraph">
<p>In order to show this feature you are going to add a processor that will call the searchWithQuery operation of the SDK.</p>
</div>
<div class="paragraph">
<p>You need to do 3 things in order to have a paginated operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Processor</span>
    <span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
    <span class="annotation">@Paged</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> ProviderAwarePagingDelegate&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;, CookbookConnector&gt; queryPaginated( <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="directive">final</span> <span class="predefined-type">String</span> query, <span class="directive">final</span> PagingConfiguration pagingConfiguration) <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="directive">throws</span> SessionExpiredException {
        <span class="keyword">return</span> <span class="keyword">new</span> CookbookPagingDelegate(query, pagingConfiguration.getFetchSize());
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotated your processor with @Paged.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Return a ProviderAwarePagingDelegate</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Receive as one of your parameters a PagingConfiguration</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When implementing your ProviderAwarePagingDelegate you need to specify two elements:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The type of the list you will return in each page. In your case a Map&lt;String,Object&gt;</p>
</li>
<li>
<p>The type of the Connector.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To create it use the Anypoint DevKit Component wizard and:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Specify the package were you want to create it. In this example <strong>org.mule.cookbook.pagination</strong></p>
</li>
<li>
<p>Specify you want to create a ProviderAwarePagingDelegate.</p>
</li>
<li>
<p>Set the class name as CookbookPagingDelegate</p>
<div class="imageblock">
<div class="content">
<img src="images/pagination-component.png" alt="pagination component" width="600">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After that you just need to implement the methods required for you to handle the new page request.</p>
</div>
<div class="paragraph">
<p>You can find the full source code of the <a href="resources/java/v8/CookbookPagingDelegate.java">CookbookPagingDelegate</a>.</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a reconnection strategy, DevKit will automatically reconnect and retry to get a page. It is important that you handle the state of your PagingDelegate to make sure you retry the last page that was not retrieved.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/Adding+Query+Pagination+Support">Adding Pagination Support</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_pagination_in_your_mule_app">Using Pagination In Your Mule App</h3>
<div class="paragraph">
<p>You can for example use a foreach in front of your paged processor:</p>
</div>
<div class="panel panel-default no-padding">
    <div class="panel-heading no-padding">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#page-view" role="tab" data-toggle="tab">Mule App</a></li>
            <li><a href="#page-xml" role="tab" data-toggle="tab">XML</a></li>
        </ul>
    </div>

    <!-- Tab panes + Panel body -->
    <div class="panel-body tab-content no-padding">
        <div class="tab-pane in active fade no-padding" id="page-view">
<div class="imageblock">
<div class="content">
<img src="images/pagination-example.png" alt="pagination example" width="600">
</div>
</div>
        </div>
        <div class="tab-pane fade no-padding" id="page-xml">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:http</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook: Connection Managament Config</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;reconnect</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/cookbook:config&gt;</span>
    <span class="tag">&lt;http:listener-config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8081</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP Listener Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mule-appFlow1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;http:listener</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/page</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:query-paginated</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">query</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET ALL FROM INGREDIENT</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">fetchSize</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;foreach</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">For Each</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;logger</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Logger</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/foreach&gt;</span>
        <span class="tag">&lt;set-payload</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Finished Processing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Set Payload</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
        </div>
    </div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-guide">Installing a Connector</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_the_anypoint_devkit_plugin">Using the Anypoint DevKit plugin</h3>
<div class="paragraph">
<p>Installing the connector is basically the same as installing any Eclipse plugin.</p>
</div>
<div id="steps-to-install" class="paragraph">
<p>To install your connector from the DevKit plugin:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click your project name in Package Explorer, and click <strong>Anypoint Connector</strong> &gt; <strong>Install Or Update</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="images/install/install1.png" alt="install1" width="500">
</div>
</div>
<div class="paragraph">
<p>This triggers the DevKit Maven build tool, which generates an <a href="http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fconcepts%2Fupdate_site.htm">update site</a> folder.</p>
</div>
<div class="paragraph">
<p>The files will be copied under the <strong>dropins</strong> folder located in the same directory as the AnypointStudio executable, and installed without the need of rebooting your AnypointStudio.</p>
</div>
</li>
<li>
<p>You can now use your connector in a Mule app.</p>
<div class="imageblock">
<div class="content">
<img src="images/install/install2.png" alt="install2" width="600">
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To uninstall the connectors you can either use the shortcut from the UI or remove the folder from the <strong>dropins</strong> directory and reboot your AnypointStudio</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/install/uninstall.png" alt="uninstall" width="400">
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_installing_from_an_updatesite">Installing from an UpdateSite</h3>
<div class="paragraph">
<p>Connectors can be installed manually by selecting the update site generated by DevKit:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt or terminal and change directory to where the pom.xml file is for your project (in the Eclipse workspace).</p>
</li>
<li>
<p>Run <strong>mvn clean package</strong>.</p>
</li>
<li>
<p>Click <strong>Help</strong> &gt; <strong>Install New Software&#8230;&#8203;</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="images/install/install-updatesite.png" alt="install updatesite" width="600">
</div>
</div>
</li>
<li>
<p>Click <strong>Add</strong> and in the new dialog look for the folder.</p>
</li>
<li>
<p>Click the UpdateSite file, generated under your project&#8217;s target folder.</p>
<div class="imageblock">
<div class="content">
<img src="images/install/install-updatesite2.png" alt="install updatesite2" width="600">
</div>
</div>
<div class="paragraph">
<p>You can either select the zip file named UpdateSite.zip or the folder update-site.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/install/install-updatesite3.png" alt="install updatesite3" width="600">
</div>
</div>
<div class="paragraph">
<p>A popup will open showing the task that is performed.</p>
</div>
<div id="install-dialog" class="imageblock">
<div class="content">
<img src="images/install/install12.png" alt="install12" width="500">
</div>
</div>
</li>
<li>
<p>Review the installation and update items, and accept the license agreement.</p>
</li>
<li>
<p>Click <strong>Finish</strong> and restart Studio for the changes to be recognized.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
JAR files are not signed during this run, so you will see a popup.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-warning.png" alt="security warning" width="600">
</div>
</div>
</li>
<li>
<p>You can now use your connector in a Mule app.</p>
<div class="imageblock">
<div class="content">
<img src="images/install/install2.png" alt="install2" width="600">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_updating_a_connector">Updating a Connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To update your connector you can repeat the steps made for <a href="#steps-to-install">installing</a> it.</p>
</div>
<div class="paragraph">
<p>AnypointStudio will detect it is an update and perform the corresponding actions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debugging_your_connector">Debugging Your Connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After successfully installing your connector, you can start using your connector in a Mule application.
You can add breakpoints in the source code of the connector to debug it.
If your connector is a Community connector, the source code ships automatically in the installed connector.
If your connector is an Enterprise, you need to manually attach the source code of your JAR.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
To correctly debug your code, take into account that the Mule app you are running is using the latest installed version, so if you make changes, and you want to debug the Mule app, you need to re-install the connector.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Debugging your connector when running your test is as simple as debugging any Java class.</p>
</div>
<div class="paragraph">
<p>You just need to set a breakpoint in your connector code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sharing_my_connector">Sharing My Connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Connector, as a component that can be installed in Anypoint Studio, is an Update Site.</p>
</div>
<div class="paragraph">
<p>Update Sites are used to organize and export features so they can be installed into Eclipse applications.</p>
</div>
<div class="paragraph">
<p>When the site is built, the included features (along with all plug-ins part of those features) will be exported into an installable form. The exported plug-ins and features will be put into two folders "plug-ins" and "features". Two other files, "content.xml" and "artifacts.xml" will also be generated and contain metadata for the exported files that make installing easier. These files, along with "site.xml", collectively form an Eclipse update site. To make the update site available to others you must make all these files available in a shared directory or web site.</p>
</div>
<div class="paragraph">
<p>When building a connector, DevKit generates this for you, so that you don&#8217;t need to worry about generating it yourself.</p>
</div>
<div class="paragraph">
<p>You can use the Anypoint DevKit plugin to either install the connector on your current Studio, or export it as an update-site for others to use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_others">Others</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="connector-structure">Connector Structure</h3>
<div class="paragraph">
<p>In order to see how all the components are related, let&#8217;s create a Hello World connector:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Anypoint Studio, click <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Anypoint Connector Project</strong> or right-click your project name in Package Explorer and click <strong>New</strong> &gt; <strong>Anypoint Connector Project</strong>:</p>
<div class="imageblock">
<div class="content">
<img src="images/new-connector-1.png" alt="new connector 1" width="500">
</div>
</div>
</li>
<li>
<p>Select the Connector Type you want to create. In this case, select SDK Based:</p>
<div class="imageblock">
<div class="content">
<img src="images/new0.png" alt="new0" width="500">
</div>
</div>
</li>
<li>
<p>Specify the name of your connector and click <strong>Finish</strong>:</p>
<div class="imageblock">
<div class="content">
<img src="images/new-connector-2.png" alt="new connector 2" width="500">
</div>
</div>
<div class="paragraph">
<p>This generates a project containing the structure and all required elements including a skeleton connector, images, sample docs, and basic tests for your connector.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-connector-3.png" alt="new connector 3" width="600">
</div>
</div>
</li>
<li>
<p>Enable the DevKit view by clicking from the top bar <strong>Window</strong> &gt; <strong>Show view</strong> &gt; <strong>Other</strong>, and look for DevKit in the list.</p>
<div class="imageblock">
<div class="content">
<img src="images/enable-view.png" alt="enable view" width="300" height="400">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your connector initially consists of message processors and user interface elements. Users can configure the UI elements in Anypoint Studio.</p>
</div>
<div class="paragraph">
<p>The DevKit makes it easy to install a connector in Studio. After you install it in Studio, users can search for your connector and drag it into a Mule flow.</p>
</div>
<div class="paragraph">
<p>Installing only requires right-clicking the name of the connector in Studio&#8217;s Package Explorer, and clicking <strong>Anypoint Connector</strong> &gt; <strong>Install or Update</strong>, completing the prompts, and restarting Studio, as you can see at the <a href="#install-guide">install section</a>. You can install at any time during coding. You can even install the starting skeleton connector.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s check the structure of the skeleton connector.</p>
</div>
<div class="paragraph">
<p>In this image you can see how most of the code maps into UI elements.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/split-1-high.png"><img src="images/split-1-high.png" alt="Image1" width="800"></a>
</div>
<div class="title">Figure 1: View Structure and UI</div>
</div>
<div class="paragraph">
<p>In this example, you can check how the code matches to XML and other UI elements.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/split-2-high.png"><img src="images/split-2-high.png" alt="Image2" width="800"></a>
</div>
<div class="title">Figure 2: View configuration and XML</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>@Config annotation is deprecated. Users instead should use @Config. On this views, consider the Config as the ConnectorConfig</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configurable">Configurable and Parameter Modifiers</h3>
<div class="sect3">
<h4 id="__optional_parameters">@Optional Parameters</h4>
<div class="paragraph">
<p>Optional parameters or configurable ones are elements that are not required, and therefore, there is no need for users to specify a value.</p>
</div>
<div class="paragraph">
<p>You can specify configurable fields inside you Connector Configuration classes, or as parameters of @Processor methods inside a @Connector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.mule.api.annotations.Configurable</span>;
<span class="keyword">import</span> <span class="include">org.mule.api.annotations.Processor</span>;
<span class="keyword">import</span> <span class="include">org.mule.api.annotations.param.Optional</span>;

<span class="comment">//Inside the Configuration class</span>

<span class="comment">/**
 * Optional Field documentation
 */</span>
<span class="annotation">@Configurable</span>
<span class="annotation">@Optional</span>
<span class="directive">private</span> <span class="predefined-type">String</span>  optionalField;
<span class="comment">//Getter and Setter of the field are required</span>

<span class="comment">//Inside your @Connector</span>

<span class="comment">/**
 * Optional parameter
 */</span>
<span class="annotation">@Processor</span>
<span class="directive">public</span> <span class="predefined-type">String</span> sayHi(<span class="predefined-type">String</span> firstName,<span class="annotation">@Optional</span> <span class="predefined-type">String</span> lastName ) {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi </span><span class="delimiter">&quot;</span></span>+firstName+<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>+((lastName==<span class="predefined-constant">null</span>) ? <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:lastName);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__default">@Default</h4>
<div class="paragraph">
<p>When you want an optional parameter or configurable you can avoid the use of @Optional and just use the @Default annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.mule.api.annotations.Configurable</span>;
<span class="keyword">import</span> <span class="include">org.mule.api.annotations.Processor</span>;
<span class="keyword">import</span> <span class="include">org.mule.api.annotations.param.Default</span>;

<span class="comment">//Inside the Configuration class</span>

<span class="comment">/**
 *  Field with Default
 */</span>
<span class="annotation">@Configurable</span>
<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hi</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> <span class="predefined-type">String</span>  greeting;
<span class="comment">//Getter and Setter of the field are required</span>

<span class="comment">//Inside your @Connector</span>

<span class="comment">/**
 * Default parameter
 */</span>
<span class="annotation">@Processor</span>
<span class="directive">public</span> <span class="predefined-type">String</span> sayHi(<span class="predefined-type">String</span> firstName,<span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Unknown</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> lastName ) {
    <span class="keyword">return</span> greeting+<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>+firstName+<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>+lastName;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another very important use of the @Default annotation is when building a connector that has DataSense.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_oauthv2">Adding OAuthV2</h3>
<div class="paragraph">
<p>The Server can also provide the token using OAuth 2.0, instead of doing a login request.</p>
</div>
<div class="paragraph">
<p>In order to use OAuth in you connector you just need to annotate your strategy with the @OAuth2 annotation.</p>
</div>
<div class="paragraph">
<p>If you only had the OAuth2 Configuration your Config would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="keyword">package</span> <span class="namespace">org.mule.modules.cookbook.config</span>;
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span><span class="keyword">import</span> <span class="include">org.mule.api.annotations.Configurable</span>;
<span class="line-numbers"> 4</span><span class="keyword">import</span> <span class="include">org.mule.api.annotations.oauth</span>.*;
<span class="line-numbers"> 5</span><span class="keyword">import</span> <span class="include">org.mule.api.annotations.param.Default</span>;
<span class="line-numbers"> 6</span>
<span class="line-numbers"> 7</span><span class="keyword">import</span> <span class="include">com.cookbook.tutorial.client.MuleCookBookClient</span>;
<span class="line-numbers"> 8</span>
<span class="line-numbers"> 9</span><span class="annotation">@OAuth2</span>(configElementName = <span class="string"><span class="delimiter">&quot;</span><span class="content">oauth2</span><span class="delimiter">&quot;</span></span>, friendlyName = <span class="string"><span class="delimiter">&quot;</span><span class="content">OAuth 2.0</span><span class="delimiter">&quot;</span></span>, authorizationUrl = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://devkit-cookbook.cloudhub.io/rest/oauth/authorize</span><span class="delimiter">&quot;</span></span>, accessTokenUrl = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://devkit-cookbook.cloudhub.io/rest/oauth/accessToken</span><span class="delimiter">&quot;</span></span>)
<span class="line-numbers"><strong>10</strong></span><span class="directive">public</span> <span class="type">class</span> <span class="class">OAuthConfig</span> {
<span class="line-numbers">11</span>
<span class="line-numbers">12</span>    <span class="directive">private</span> MuleCookBookClient client;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span>    <span class="annotation">@OAuthAccessToken</span>
<span class="line-numbers">15</span>    <span class="directive">private</span> <span class="predefined-type">String</span> accessToken;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span>    <span class="annotation">@Configurable</span>
<span class="line-numbers">18</span>    <span class="annotation">@OAuthConsumerKey</span>
<span class="line-numbers">19</span>    <span class="directive">private</span> <span class="predefined-type">String</span> consumerKey;
<span class="line-numbers"><strong>20</strong></span>
<span class="line-numbers">21</span>    <span class="annotation">@Configurable</span>
<span class="line-numbers">22</span>    <span class="annotation">@OAuthConsumerSecret</span>
<span class="line-numbers">23</span>    <span class="directive">private</span> <span class="predefined-type">String</span> consumerSecret;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span>    <span class="comment">/**</span>
<span class="line-numbers">26</span><span class="comment">     * URL used to connect to the service</span>
<span class="line-numbers">27</span><span class="comment">     */</span>
<span class="line-numbers">28</span>    <span class="annotation">@Configurable</span>
<span class="line-numbers">29</span>    <span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://devkit-cookbook.cloudhub.io/soap</span><span class="delimiter">&quot;</span></span>)
<span class="line-numbers"><strong>30</strong></span>    <span class="directive">private</span> <span class="predefined-type">String</span> address;
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="annotation">@OAuthPostAuthorization</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> <span class="type">void</span> postAuthorize() {
<span class="line-numbers">34</span>        setClient(<span class="keyword">new</span> MuleCookBookClient(getAddress()));
<span class="line-numbers">35</span>        getClient().setToken(getAccessToken());
<span class="line-numbers">36</span>    }
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>    <span class="directive">public</span> <span class="type">void</span> setAccessToken(<span class="predefined-type">String</span> accessToken) {
<span class="line-numbers">39</span>        <span class="local-variable">this</span>.accessToken = accessToken;
<span class="line-numbers"><strong>40</strong></span>    }
<span class="line-numbers">41</span>
<span class="line-numbers">42</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getAccessToken() {
<span class="line-numbers">43</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.accessToken;
<span class="line-numbers">44</span>    }
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="type">void</span> setConsumerKey(<span class="predefined-type">String</span> consumerKey) {
<span class="line-numbers">47</span>        <span class="local-variable">this</span>.consumerKey = consumerKey;
<span class="line-numbers">48</span>    }
<span class="line-numbers">49</span>
<span class="line-numbers"><strong>50</strong></span>    <span class="directive">public</span> <span class="predefined-type">String</span> getConsumerKey() {
<span class="line-numbers">51</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.consumerKey;
<span class="line-numbers">52</span>    }
<span class="line-numbers">53</span>
<span class="line-numbers">54</span>    <span class="directive">public</span> <span class="type">void</span> setConsumerSecret(<span class="predefined-type">String</span> consumerSecret) {
<span class="line-numbers">55</span>        <span class="local-variable">this</span>.consumerSecret = consumerSecret;
<span class="line-numbers">56</span>    }
<span class="line-numbers">57</span>
<span class="line-numbers">58</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getConsumerSecret() {
<span class="line-numbers">59</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.consumerSecret;
<span class="line-numbers"><strong>60</strong></span>    }
<span class="line-numbers">61</span>
<span class="line-numbers">62</span>    <span class="directive">public</span> MuleCookBookClient getClient() {
<span class="line-numbers">63</span>        <span class="keyword">return</span> client;
<span class="line-numbers">64</span>    }
<span class="line-numbers">65</span>
<span class="line-numbers">66</span>    <span class="directive">public</span> <span class="type">void</span> setClient(MuleCookBookClient client) {
<span class="line-numbers">67</span>        <span class="local-variable">this</span>.client = client;
<span class="line-numbers">68</span>    }
<span class="line-numbers">69</span>
<span class="line-numbers"><strong>70</strong></span>    <span class="directive">public</span> <span class="predefined-type">String</span> getAddress() {
<span class="line-numbers">71</span>        <span class="keyword">return</span> address;
<span class="line-numbers">72</span>    }
<span class="line-numbers">73</span>
<span class="line-numbers">74</span>    <span class="directive">public</span> <span class="type">void</span> setAddress(<span class="predefined-type">String</span> address) {
<span class="line-numbers">75</span>        <span class="local-variable">this</span>.address = address;
<span class="line-numbers">76</span>    }
<span class="line-numbers">77</span>
<span class="line-numbers">78</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All our operations now need to be marked with the @OAuthProtected, even our @Source.</p>
</div>
<div class="paragraph">
<p>In our Connector for example you will see:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@OAuthProtected</span>
    <span class="annotation">@Processor</span>
    <span class="annotation">@OnException</span>(handler = CookbookHandler.class)
    <span class="annotation">@ReconnectOn</span>(exceptions = { SessionExpiredException.class })
    <span class="directive">public</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; create(<span class="annotation">@MetaDataKeyParam</span>(affects = MetaDataKeyParamAffectsType.BOTH) <span class="predefined-type">String</span> type, <span class="annotation">@Default</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@RefOnly</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; entity)
            <span class="directive">throws</span> InvalidEntityException, SessionExpiredException {
        ObjectMapper m = <span class="keyword">new</span> ObjectMapper();
        CookBookEntity input = <span class="predefined-constant">null</span>;
        <span class="keyword">if</span> (type.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">com.cookbook.tutorial.service.Recipe</span><span class="delimiter">&quot;</span></span>)) {
            input = m.convertValue(entity, Recipe.class);
        } <span class="keyword">else</span> <span class="keyword">if</span> (type.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">com.cookbook.tutorial.service.Ingredient</span><span class="delimiter">&quot;</span></span>)) {
            input = m.convertValue(entity, Ingredient.class);
        } <span class="keyword">else</span> {
            <span class="keyword">throw</span> <span class="keyword">new</span> InvalidEntityException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Don't know how to handle type:</span><span class="delimiter">&quot;</span></span> + type);
        }
        <span class="keyword">return</span> m.convertValue(<span class="local-variable">this</span>.getConfig().getClient().create(input), <span class="predefined-type">Map</span>.class);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check <a href="resources/java/v9/CookBookConnector.java">full source</a> code.</p>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/Authentication">DevKit Authentication</a> documentation.</p>
</li>
<li>
<p><a href="http://www.mulesoft.org/documentation/display/current/OAuth+V2">OAuth V2</a>.</p>
</li>
<li>
<p><a href="#mutiple-connection-strategies">Supporting Multiple Connection Strategies</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="mutiple-connection-strategies">Multiple Configuration</h3>
<div class="paragraph">
<p>If you want to have multiple connection configurations there are two things to take into account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All Configurations either need to implement the same interface or have a common parent class.</p>
</li>
<li>
<p>The connector Config field needs to be declared either as the interface or as the common parent class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your configuration has common fields, they can be defined at a parent class.</p>
</div>
<div class="paragraph">
<p>In our connector, after the refactor the classes would look like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/model.png" alt="model" width="512" height="261">
</div>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="resources/java/v9/CookBookConnector.java">Connector</a> source code.</p>
</li>
<li>
<p><a href="resources/java/v9/ConnectorConfig.java">Base Config</a> source code.</p>
</li>
<li>
<p><a href="resources/java/v9/ConnectionManagementConfig.java">Connection Management Config</a> source code.</p>
</li>
<li>
<p><a href="resources/java/v9/OAuthConfig.java">OAuth2 Config</a> source code.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_source">Adding @Source</h3>
<div class="sect3">
<h4 id="_what_is_a_source">What is a Source</h4>
<div class="paragraph">
<p>In some cases it is necessary to create Message Sources instead of Message Processors.</p>
</div>
<div class="paragraph">
<p>Basically, a Message Source receives or generates new messages to be processed by Mule.
One of the use cases for a Message Source is implementing Streaming APIs. The @Source annotation marks a method inside a @Connector annotated class as callable from a Mule flow and capable of generating Mule events. Each marked method will have a Message Source generated. The method must receive a SourceCallback as one of its arguments that represents the next message processor in the chain. It does not matter the order in which this parameter appears as long it is present in the method signature.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_a_message_source">Implementing a Message Source</h4>
<div class="paragraph">
<p>As an example, we are going to use the GetRecentlyAdded method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inside your @Connector type source and use Ctrl + Space bar to display the templates.</p>
<div class="imageblock">
<div class="content">
<img src="images/source/source-template.png" alt="source template" width="600">
</div>
</div>
</li>
<li>
<p>Create a @Source that consumes the Get Recently Updated on the Connector using a callback</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Source</span>(sourceStrategy = SourceStrategy.POLLING, pollingPeriod = <span class="integer">10000</span>)
<span class="directive">public</span> <span class="type">void</span> getRecentlyAddedSource(<span class="directive">final</span> SourceCallback callback) <span class="directive">throws</span> <span class="exception">Exception</span> {

    <span class="keyword">if</span> (<span class="local-variable">this</span>.getConfig().getClient() != <span class="predefined-constant">null</span>) {
        <span class="comment">// Every 10 seconds our callback will be executed</span>
        <span class="local-variable">this</span>.getConfig().getClient().getRecentlyAdded(<span class="keyword">new</span> ICookbookCallback() {

            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> execute(<span class="predefined-type">List</span>&lt;Recipe&gt; recipes) <span class="directive">throws</span> <span class="exception">Exception</span> {
                callback.process(recipes);
            }
        });

        <span class="keyword">if</span> (<span class="predefined-type">Thread</span>.interrupted()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">InterruptedException</span>();
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Install this new version</p>
</li>
<li>
<p>On your flow now just drag and drop the Cookbook Connector, and you will see that is automatically while generate a flow.</p>
<div class="imageblock">
<div class="content">
<img src="images/source/source-example.png" alt="source example" width="600">
</div>
</div>
</li>
<li>
<p>Add a logger and debug to see that the payload now has your recipes.</p>
</li>
</ol>
</div>
<div class="panel panel-default no-padding">
    <div class="panel-heading no-padding">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#source-view" role="tab" data-toggle="tab">Mule App</a></li>
            <li><a href="#source-xml" role="tab" data-toggle="tab">XML</a></li>
        </ul>
    </div>

    <!-- Tab panes + Panel body -->
    <div class="panel-body tab-content no-padding">
        <div class="tab-pane in active fade no-padding" id="source-view">
<div class="imageblock">
<div class="content">
<img src="images/source/source-debug.png" alt="source debug" width="600">
</div>
</div>
        </div>
        <div class="tab-pane fade no-padding" id="source-xml">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:tracking</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/ee/tracking</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook: Connection Managament Config</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">source-get-recently-added</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;cookbook:get-recently-added-source</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook (Streaming)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;logger</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Logger</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
        </div>
    </div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_a_transformer">Adding a Transformer</h3>
<div class="sect3">
<h4 id="_what_is_a_transformer">What is a Transformer?</h4>
<div class="paragraph">
<p>Transformers convert message payloads to formats expected by their destinations. Mule ESB provides many standard transformers, which users can configure using elements and attributes in a Mule XML configuration file.</p>
</div>
<div class="paragraph">
<p>Sometimes it&#8217;s useful to build your own custom transformers.</p>
</div>
<div class="paragraph">
<p>Annotating a method with @Transformer signals the DevKit to export a method functionality as a transformer. You need to declare Transformers in classes annotated with @Module or @Connector and you can declare more than one transformer in a single class. It is possible to declare transformers, message processors, and message sources all in the same class.</p>
</div>
<div class="paragraph">
<p>An @Transformer annotated method must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be static</p>
</li>
<li>
<p>Be public</p>
</li>
<li>
<p>Not return void</p>
</li>
<li>
<p>Not return java.lang.Object</p>
</li>
<li>
<p>Receive exactly one argument</p>
</li>
<li>
<p>Be inside a class annotated with @Connector</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_transformer">Creating a Transformer</h4>
<div class="paragraph">
<p>In our case, we are creating a transformer that converts a List&lt;Recipe&gt; into a List&lt;Map&lt;String,Object&gt;&gt;, that way we don&#8217;t need to modify our existing operation, and yet we can use the output of it in operations that recieve a List&lt;Map&lt;String,Object&gt;&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Transformer</span>(sourceTypes = { <span class="predefined-type">List</span>.class })
<span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt; transformJsonToComments(<span class="predefined-type">List</span>&lt;Recipe&gt; list) {
    ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt; result = mapper.convertValue(list, <span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt;&gt;() {
    });
    <span class="keyword">return</span> result;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_your_transformer_in_a_mule_app">Using Your Transformer in a Mule App</h4>
<div class="paragraph">
<p>To use your transformer, just drag and drop it from the palette and build a flow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Here we are using it explicitly to map transform the recipes into a Map.</p>
</li>
</ul>
</div>
<div class="panel panel-default no-padding">
    <div class="panel-heading no-padding">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#transformer-view" role="tab" data-toggle="tab">Mule App</a></li>
            <li><a href="#transformer-xml" role="tab" data-toggle="tab">XML</a></li>
        </ul>
    </div>

    <!-- Tab panes + Panel body -->
    <div class="panel-body tab-content no-padding">
        <div class="tab-pane in active fade no-padding" id="transformer-view">
<div class="imageblock">
<div class="content">
<img src="images/transformer/transformer-explicit.png" alt="transformer explicit" width="600">
</div>
</div>
        </div>
        <div class="tab-pane fade no-padding" id="transformer-xml">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:http</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook: Connection Managament Config</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;reconnect</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/cookbook:config&gt;</span>
    <span class="tag">&lt;http:listener-config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8081</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP Listener Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mule-appFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;http:listener</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/transform</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:get-recently-added</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:recipes-to-maps</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;json:object-to-json-transformer</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Object to JSON</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
        </div>
    </div>
</div>
<div class="ulist">
<ul>
<li>
<p>Transformers can also be used implicitly as long as only one transformer is found to resolve the type.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define another transformer that can transform Recipe object into Map&lt;String,Object&gt;</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Transformer</span>(sourceTypes = { Recipe.class })
<span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; recipeToMap(Recipe recipe) {
    ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();
    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; result = mapper.convertValue(recipe, <span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt;() {
    });
    <span class="keyword">return</span> result;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Install the connector.</p>
</li>
<li>
<p>In your mule app create a flow that takes the first item of the list and add an update operation after it. Don&#8217;t use the transformer.</p>
<div class="panel panel-default no-padding">
    <div class="panel-heading no-padding">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#transformer2-view" role="tab" data-toggle="tab">Mule App</a></li>
            <li><a href="#transformer2-xml" role="tab" data-toggle="tab">XML</a></li>
        </ul>
    </div>

    <!-- Tab panes + Panel body -->
    <div class="panel-body tab-content no-padding">
        <div class="tab-pane in active fade no-padding" id="transformer2-view">
<div class="imageblock">
<div class="content">
<img src="images/transformer/transformer-implicitly.png" alt="transformer implicitly" width="600">
</div>
</div>
        </div>
        <div class="tab-pane fade no-padding" id="transformer2-xml">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tag">&lt;mule</span> <span class="attribute-name">xmlns:json</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/json</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:cookbook</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/cookbook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:http</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/core</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:doc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.mulesoft.org/schema/mule/documentation</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:spring</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EE-3.6.1</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/cookbook http://www.mulesoft.org/schema/mule/cookbook/current/mule-cookbook.xsd</span>
<span class="content">http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;cookbook:config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook: Connection Managament Config</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;reconnect</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/cookbook:config&gt;</span>
    <span class="tag">&lt;http:listener-config</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8081</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP Listener Configuration</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mule-appFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;http:listener</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_Listener_Configuration</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/transform</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;cookbook:get-recently-added</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="comment">&lt;!-- Get the first item of the list --&gt;</span>
        <span class="tag">&lt;set-payload</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload.get(0)]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Set Payload</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="comment">&lt;!-- This operation is expecting a Map. Not a Recipe, but we are not using the transformer in the flow. The transformer will be called automatically --&gt;</span>
        <span class="tag">&lt;cookbook:update</span> <span class="attribute-name">config-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook__Connection_Managament_Config</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.cookbook.tutorial.service.Recipe#0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CookBook</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="comment">&lt;!-- Take the payload as input for the connector --&gt;</span>
            <span class="tag">&lt;cookbook:entity</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/cookbook:update&gt;</span>
        <span class="tag">&lt;json:object-to-json-transformer</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Object to JSON</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/flow&gt;</span>
<span class="tag">&lt;/mule&gt;</span></code></pre>
</div>
</div>
        </div>
    </div>
</div>
</li>
<li>
<p>Run the example and see that the flow will execute successfully.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_password">Using @Password</h3>
<div class="paragraph">
<p>When using the @Password in a @Connect parameters, it generates a masked input field in the UI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Connect</span>
    <span class="annotation">@TestConnectivity</span>
    <span class="directive">public</span> <span class="type">void</span> connect(<span class="annotation">@ConnectionKey</span> <span class="predefined-type">String</span> username, <span class="annotation">@Password</span> <span class="predefined-type">String</span> password) <span class="directive">throws</span> ConnectionException {</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Studio this translates into:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/password.png" alt="password" width="500">
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>== Using an API to Build a Connector</pre>
</div>
</div>
<div class="paragraph">
<p>APIs are exposed in several ways. To start using your API, you should set up a few things before you can use it inside your connector.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sdk_client">SDK Client</h3>
<div class="paragraph">
<p>If you have an SDK all you need to do is to include the Maven dependency for your jar in the pom.xml</p>
</div>
<div class="paragraph">
<p>For example in our case, to consume the SDK for the Cookbook we can add the dependency.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
  <span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>foo.sdk.group.id<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>foo.sdk.artifact.id<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>${sdk.version}<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_soap_api">SOAP API</h3>
<div class="paragraph">
<p>If you have a wsdl, the easiest way to build a connector is to create a client using CXF <a href="http://cxf.apache.org/docs/wsdl-to-java.html">wsdl2java</a>.</p>
</div>
<div class="paragraph">
<p>You can configure the CXF goal in your pom.xml file very easily. The full documentation is at the Apache  <a href="http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html">CXF site</a>.</p>
</div>
<div class="paragraph">
<p>For example, in your pom.xml file, you can add the following plus all required dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
  <span class="tag">&lt;plugins&gt;</span>
    <span class="comment">&lt;!-- CXF Code generation --&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.apache.cxf<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>cxf-codegen-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>${cxf.version}<span class="tag">&lt;/version&gt;</span>
      <span class="tag">&lt;executions&gt;</span>
        <span class="tag">&lt;execution&gt;</span>
          <span class="tag">&lt;phase&gt;</span>clean<span class="tag">&lt;/phase&gt;</span> <span class="comment">&lt;!-- This is required for it to work with DevKit --&gt;</span>
          <span class="tag">&lt;goals&gt;</span>
            <span class="tag">&lt;goal&gt;</span>wsdl2java<span class="tag">&lt;/goal&gt;</span>
          <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;configuration&gt;</span>
            <span class="tag">&lt;wsdlOptions&gt;</span>
              <span class="tag">&lt;wsdlOption&gt;</span>
                <span class="tag">&lt;wsdl&gt;</span>${basedir}/src/main/resources/wsdl/IMuleCookBookService.wsdl<span class="tag">&lt;/wsdl&gt;</span>
                <span class="tag">&lt;autoNameResolution&gt;</span>true<span class="tag">&lt;/autoNameResolution&gt;</span>
                <span class="tag">&lt;extendedSoapHeaders&gt;</span>false<span class="tag">&lt;/extendedSoapHeaders&gt;</span>
                <span class="tag">&lt;extraargs&gt;</span>
                  <span class="tag">&lt;extraarg&gt;</span>-xjc-Xbg<span class="tag">&lt;/extraarg&gt;</span>
                   <span class="tag">&lt;extraarg&gt;</span>-xjc-Xcollection-setter-injector<span class="tag">&lt;/extraarg&gt;</span>
                  <span class="tag">&lt;extraarg&gt;</span>-p<span class="tag">&lt;/extraarg&gt;</span>
                  <span class="tag">&lt;extraarg&gt;</span>org.mule.modules.wsdl.api<span class="tag">&lt;/extraarg&gt;</span>
                <span class="tag">&lt;/extraargs&gt;</span>
              <span class="tag">&lt;/wsdlOption&gt;</span>
            <span class="tag">&lt;/wsdlOptions&gt;</span>
          <span class="tag">&lt;/configuration&gt;</span>
         <span class="tag">&lt;/execution&gt;</span>
      <span class="tag">&lt;/executions&gt;</span>
      <span class="tag">&lt;dependencies&gt;</span>
        <span class="comment">&lt;!-- Boolean Getters --&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.apache.cxf.xjcplugins<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>cxf-xjc-boolean<span class="tag">&lt;/artifactId&gt;</span>
          <span class="tag">&lt;version&gt;</span>${cxf.version.boolean}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="comment">&lt;!-- Collection Setters --&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>net.java.dev.vcc.thirdparty<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>collection-setter-injector<span class="tag">&lt;/artifactId&gt;</span>
          <span class="tag">&lt;version&gt;</span>0.5.0-1<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
      <span class="tag">&lt;/dependencies&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
  <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use the DevKit plugin it generates everything for you to get started, you just need to specify the WSDL location on your computer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rest_api">REST API</h3>
<div class="paragraph">
<p>Write the request using any library that helps you make HTTP Requests.</p>
</div>
<div class="paragraph">
<p>We recommend using Jersey 2.11, which is provided in Mule version 3.6.0 and later.</p>
</div>
<div class="paragraph">
<p>To make sure you always use the right version, add the following dependency.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.mule.modules<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>mule-module-jersey<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>${mule.version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example GET request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ClientConfig clientConfig = <span class="keyword">new</span> ClientConfig();
Client client = ClientBuilder.newClient(clientConfig);
WebTarget webTarget = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/rest</span><span class="delimiter">&quot;</span></span>); <span class="comment">// </span><i class="conum" data-value="1"></i><b>(1)</b>
WebTarget resourceWebTarget = webTarget.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">resource</span><span class="delimiter">&quot;</span></span>);
WebTarget helloworldWebTarget = resourceWebTarget.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">helloworld</span><span class="delimiter">&quot;</span></span>); <span class="comment">// </span><i class="conum" data-value="2"></i><b>(2)</b>
WebTarget helloworldWebTargetWithQueryParam =
        helloworldWebTarget.queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi World!</span><span class="delimiter">&quot;</span></span>); <span class="comment">// </span><i class="conum" data-value="3"></i><b>(3)</b>

Invocation.Builder invocationBuilder =
        helloworldWebTargetWithQueryParam.request(MediaType.APPLICATION_JSON_TYPE); <span class="comment">// </span><i class="conum" data-value="4"></i><b>(4)</b>

Response response = invocationBuilder.get(); <span class="comment">// </span><i class="conum" data-value="5"></i><b>(5)</b>
<span class="predefined-type">System</span>.out.println(response.getStatus());
<span class="predefined-type">System</span>.out.println(response.readEntity(<span class="predefined-type">String</span>.class));</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The client is ready to make a request to URL <a href="http://example.com/rest" class="bare">http://example.com/rest</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add paths for <a href="http://example.com/rest/resource/helloworld" class="bare">http://example.com/rest/resource/helloworld</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Configure a query param. It looks like <a href="http://example.com/rest/resource/helloworld?greeting=Hi+World%21" class="bare">http://example.com/rest/resource/helloworld?greeting=Hi+World%21</a></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify we want the reply in JSON format</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Make a GET request</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see the <a href="https://jersey.java.net/documentation/latest/client.html">Jersey client</a> documentation.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-08-24 11:19:58 BRT
</div>
</div>
</body>
</html>